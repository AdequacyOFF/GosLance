# ГосТендер (GosLance)

Платформа для поиска государственных тендеров и подрядов с использованием искусственного интеллекта.

## Описание проекта

**ГосТендер** - это интеллектуальная платформа, которая помогает компаниям находить подходящие государственные заказы и тендеры. Система использует AI-агентов для анализа профиля компании и автоматического подбора релевантных тендеров.

### Основные возможности

- **Создание профиля компании** - интерактивный диалог с AI-ассистентом для сбора информации о компании, её компетенциях и опыте
- **Поиск тендеров** - автоматический подбор государственных заказов на основе профиля компании
- **Оценка соответствия** - система выставляет процент совпадения для каждого тендера
- **Управление несколькими профилями** - возможность работы с несколькими компаниями

## Технологический стек

- **React 19.2.0** - современный UI-фреймворк
- **TypeScript** - типизация и безопасность кода
- **Vite 7.2.4** - быстрая сборка и разработка
- **React Router DOM 7.10.1** - маршрутизация
- **@a2a-js/sdk** - интеграция с AI-агентами
- **React Markdown** - отображение форматированных сообщений
- **Docker** - контейнеризация для разработки и продакшена

## Быстрый старт

### Предварительные требования

- Node.js 20 или выше
- npm или yarn
- Docker и Docker Compose (для запуска в контейнерах)

### Установка зависимостей

```bash
npm install
```

### Переменные окружения

Создайте файл `.env` в корне проекта:

```env
VITE_AGENT_BASE_URL=https://31fd7d3f-2580-4179-b86a-3b5125118293-agent.ai-agent.inference.cloud.ru
```

## Запуск проекта

### Режим разработки (локально)

```bash
npm run dev
```

Приложение будет доступно по адресу: http://localhost:5173

### Режим разработки (Docker с hot reload)

```bash
docker-compose -f docker-compose.dev.yml up
```

Приложение будет доступно по адресу: http://localhost:5173

Преимущества Docker-режима:
- Изолированное окружение
- Автоматическая перезагрузка при изменении кода
- Идентичность окружения на всех машинах

### Производственный режим (Docker)

```bash
docker-compose up -d
```

Приложение будет доступно по адресу: http://localhost:8080

Для просмотра логов:
```bash
docker-compose logs -f
```

Для остановки контейнеров:
```bash
docker-compose down
```

## Команды разработки

```bash
# Запуск dev-сервера с hot reload
npm run dev

# Сборка для продакшена
npm run build

# Проверка кода линтером
npm run lint

# Предпросмотр production-сборки
npm run preview
```

## Структура проекта

```
src/
├── pages/              # Страницы приложения
│   ├── Profile/        # Страница создания профиля компании
│   └── Exchange/       # Страница поиска тендеров
├── widgets/            # Сложные UI-компоненты
│   └── Header/         # Шапка приложения
├── shared/             # Общие ресурсы
│   ├── types/          # TypeScript типы
│   ├── lib/            # Утилиты и бизнес-логика
│   │   ├── agentClient.ts      # Клиент для работы с AI-агентами
│   │   ├── companyManager.ts   # Управление профилями компаний
│   │   └── mockData.ts         # Тестовые данные
│   ├── contexts/       # React контексты
│   └── ui/             # Переиспользуемые UI-компоненты
└── App.tsx             # Главный компонент с роутингом
```

## Архитектура

Проект использует методологию **Feature-Sliced Design (FSD)** для организации кода по слоям и функциональным возможностям.

### Архитектура AI-агентов

Приложение взаимодействует с двумя специализированными AI-агентами:

1. **Агент создания профиля** (`Profile page`)
   - URL: https://31fd7d3f-2580-4179-b86a-3b5125118293-agent.ai-agent.inference.cloud.ru
   - Собирает информацию о компании через диалог
   - Возвращает JSON с `company_id` и `company_name`

2. **Агент подбора тендеров** (`Exchange page`)
   - URL: https://25855856-ed62-4327-8321-92831b4810bd-agent.ai-agent.inference.cloud.ru
   - Получает `company_id` в метаданных запроса
   - Подбирает релевантные тендеры на основе профиля компании

### Управление состоянием

- **Темы** - глобальная тема (светлая/темная) через `ThemeContext`, сохраняется в localStorage
- **Профили компаний** - управляются через `CompanyManager`, сохраняются в localStorage
- **Сессии** - каждая страница создает уникальный `session_id` для диалога с агентом
- **Навигация** - данные компании передаются между страницами через React Router state

## Docker

Проект включает многоступенчатый Dockerfile с 4 стадиями:

1. **base** - установка зависимостей Node.js
2. **development** - настройка dev-сервера
3. **builder** - production-сборка
4. **production** - Nginx с статическими файлами

### Development image
- Размер: ~300MB
- Включает Node.js и исходный код
- Hot Module Replacement (HMR)
- Файловый мониторинг с polling

### Production image
- Размер: <50MB
- Только Nginx и статические файлы
- Gzip-сжатие
- Кеширование статики (1 год)
- Security headers
- Health check на `/health`

## Сборка проекта

Процесс сборки (`npm run build`) выполняет:

1. Проверку TypeScript (`tsc -b`)
2. Production-сборку через Vite

Результат сборки помещается в папку `dist/`.

## Конфигурация TypeScript

Проект использует project references с раздельными конфигами:
- `tsconfig.app.json` - конфигурация приложения
- `tsconfig.node.json` - конфигурация Node.js tooling
- `tsconfig.json` - композитная конфигурация

Включен strict mode и дополнительные правила линтинга.

## Разработка

### Работа с профилями компаний

Профили компаний сохраняются в localStorage и сохраняются между сессиями. Каждый профиль содержит:
- `company_id` - уникальный идентификатор
- `company_name` - название компании

Пользователи могут переключаться между несколькими сохраненными профилями.

### Работа с AI-агентами

Каждая страница создает собственный экземпляр `AgentClient` с уникальным `session_id`. Клиент:
- Автоматически загружает agent card с `.well-known/agent-card.json`
- Переопределяет внутренний URL агента публичным endpoint'ом
- Использует официальный `@a2a-js/sdk` для коммуникации
- Обрабатывает специальные теги `<think>` и `<NEED_USER_INPUT>`

### Форматирование сообщений

Ответы агентов могут содержать Markdown-разметку и специальные теги:
- `<think>...</think>` - внутренние размышления агента (скрываются от пользователя)
- `<NEED_USER_INPUT>` - маркер запроса ввода пользователя

## Лицензия

Проект разработан для хакатона по поиску государственных тендеров.
